---
import { imageBuilder } from "@api/sanity";
import TeaserWithImage from "@components/uicomposition/TeaserWithImage.astro";
import type { CalloutReferenced, i18nImage } from "@sanity/custom.sanity.types";

interface Props {
  callout: CalloutReferenced;
}

const { callout } = Astro.props;
const locale = Astro.currentLocale!;

let textObject: any;
let imageObject: i18nImage;
if (callout?.content?.[0]._type == "textObject") {
  textObject = callout?.content?.[0];
  imageObject = callout?.content?.[1] as i18nImage;
} else {
  textObject = callout?.content?.[1];
  imageObject = callout?.content?.[0] as i18nImage;
}
---

{
  callout?.content?.[0] && (
    <TeaserWithImage
      text={textObject ? textObject.richText : ""}
      align={callout?.content?.[0]._type == "textObject" ? "right" : "left"}
    >
      {imageObject && imageObject.asset?._id && (
        <img
          src={imageBuilder.image(imageObject.asset?._id).url()}
          alt={imageObject.asset.altTexts?.[locale] || ""}
          class="rounded-xl"
        />
      )}
    </TeaserWithImage>
  )
}
